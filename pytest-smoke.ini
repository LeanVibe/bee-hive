[tool:pytest]
# Pytest configuration for smoke tests
# Optimized for fast execution and reliability

minversion = 6.0
addopts = 
    -v
    --tb=short
    --strict-markers
    --strict-config
    --disable-warnings
    -p no:cacheprovider
    --maxfail=5
    --durations=10
    --color=yes

testpaths = tests/smoke

markers =
    smoke: Smoke tests for critical functionality
    performance: Performance validation tests
    integration: Cross-component integration tests
    api: API endpoint tests
    database: Database connectivity tests
    redis: Redis connectivity tests
    orchestrator: SimpleOrchestrator tests
    auth: Authentication/authorization tests
    slow: Tests that take longer than 1 second
    fast: Tests that complete in under 100ms

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Async support
asyncio_mode = auto

# Environment setup
env =
    TESTING = true
    DEBUG = true
    LOG_LEVEL = ERROR
    SKIP_STARTUP_INIT = true
    CI = false
    PYTHONHASHSEED = 0

# Timeout for tests (smoke tests should be fast)
timeout = 30
timeout_method = thread

# Coverage settings (optional for smoke tests)
norecursedirs = .git .tox dist build *.egg

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:.*SQLAlchemy.*
    ignore::UserWarning:.*aiosqlite.*
    error::UserWarning:.*app.*
