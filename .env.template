# Project Index Universal Installer - Environment Configuration Template
# Copy this file to .env and customize for your deployment

# =========================================================================
# DEPLOYMENT CONFIGURATION
# =========================================================================

# Deployment Profile: small, medium, large, xlarge
DEPLOYMENT_PROFILE=medium

# Environment: development, staging, production
ENVIRONMENT=production

# Build Configuration
BUILD_TARGET=production
BUILD_DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
VCS_REF=$(git rev-parse --short HEAD 2>/dev/null || echo "unknown")
VERSION=2.0.0

# =========================================================================
# PROJECT CONFIGURATION
# =========================================================================

# Project Information
PROJECT_NAME=my-project
PROJECT_DESCRIPTION="My Project Analysis"
PROJECT_LANGUAGE=auto-detect
PROJECT_TYPE=web

# Host Project Path - REQUIRED: Path to your project directory
HOST_PROJECT_PATH=/path/to/your/project

# Data Directory - Where all persistent data will be stored
DATA_DIR=./data

# =========================================================================
# SECURITY CONFIGURATION
# =========================================================================

# Database Password - REQUIRED: Change this for production
PROJECT_INDEX_PASSWORD=your_secure_database_password_here

# Redis Password - REQUIRED: Change this for production  
REDIS_PASSWORD=your_secure_redis_password_here

# API Security
API_KEY_REQUIRED=false
RATE_LIMIT_ENABLED=true
RATE_LIMIT_RPM=300

# CORS and Host Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8101
ALLOWED_HOSTS=localhost,127.0.0.1,project-index

# =========================================================================
# NETWORK CONFIGURATION
# =========================================================================

# Service Ports (change if conflicts exist)
PROJECT_INDEX_PORT=8100
PROJECT_INDEX_METRICS_PORT=9100
POSTGRES_PORT=5433
REDIS_PORT=6380
DASHBOARD_PORT=8101
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# Public URLs (for external access)
PUBLIC_API_URL=http://localhost:8100
PUBLIC_WEBSOCKET_URL=ws://localhost:8100/ws

# =========================================================================
# ANALYSIS CONFIGURATION
# =========================================================================

# Analysis Mode: simple, smart, intelligent, comprehensive
ANALYSIS_MODE=intelligent

# File Monitoring Patterns (customize for your project)
MONITOR_PATTERNS=**/*.py,**/*.js,**/*.ts,**/*.jsx,**/*.tsx,**/*.go,**/*.rs,**/*.java,**/*.cpp,**/*.c,**/*.h,**/*.cs,**/*.php,**/*.rb,**/*.scala,**/*.kt,**/*.swift

# Files to Ignore (add project-specific patterns)
IGNORE_PATTERNS=**/node_modules/**,**/.git/**,**/__pycache__/**,**/target/**,**/build/**,**/dist/**,**/venv/**,**/.venv/**,**/env/**,**/.env/**,**/vendor/**,**/cmake-build-*/**

# Performance Settings
MAX_FILE_SIZE_MB=50
MAX_FILES_PER_ANALYSIS=10000
ANALYSIS_TIMEOUT_SECONDS=600
DEBOUNCE_SECONDS=1.0

# =========================================================================
# FEATURE TOGGLES
# =========================================================================

# Core Features
ENABLE_INCREMENTAL=true
ENABLE_REAL_TIME_MONITORING=true
ENABLE_WEBSOCKET_EVENTS=true

# Advanced Features
ENABLE_ML_ANALYSIS=true
ENABLE_DEPENDENCY_ANALYSIS=true
ENABLE_SEMANTIC_SEARCH=true
ENABLE_SMART_CACHING=true
CACHE_COMPRESSION=true

# Performance Monitoring
ENABLE_METRICS=true
ENABLE_PERF_MONITORING=true
ENABLE_PERFORMANCE_MONITORING=true

# Dashboard Features
ENABLE_REAL_TIME_UPDATES=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_EXPORT_FEATURES=true
DASHBOARD_AUTH=false

# =========================================================================
# RESOURCE LIMITS (Customize based on DEPLOYMENT_PROFILE)
# =========================================================================

# API Service Resources
PROJECT_INDEX_MEMORY_LIMIT=2G
PROJECT_INDEX_CPU_LIMIT=1.0
PROJECT_INDEX_MEMORY_RESERVATION=1G
PROJECT_INDEX_CPU_RESERVATION=0.5

# Database Resources  
POSTGRES_MEMORY_LIMIT=1G
POSTGRES_CPU_LIMIT=0.5
POSTGRES_MEMORY_RESERVATION=512M
POSTGRES_CPU_RESERVATION=0.25

# Redis Resources
REDIS_MEMORY_LIMIT=512M
REDIS_CPU_LIMIT=0.25
REDIS_MEMORY_RESERVATION=256M
REDIS_CPU_RESERVATION=0.1

# Worker Resources
WORKER_MEMORY_LIMIT=1G
WORKER_CPU_LIMIT=0.5
WORKER_MEMORY_RESERVATION=512M
WORKER_CPU_RESERVATION=0.25
WORKER_REPLICAS=1

# Monitor Resources
MONITOR_MEMORY_LIMIT=256M
MONITOR_CPU_LIMIT=0.2
MONITOR_MEMORY_RESERVATION=128M
MONITOR_CPU_RESERVATION=0.1

# Dashboard Resources
DASHBOARD_MEMORY_LIMIT=512M
DASHBOARD_CPU_LIMIT=0.25
DASHBOARD_MEMORY_RESERVATION=256M
DASHBOARD_CPU_RESERVATION=0.1

# =========================================================================
# PERFORMANCE TUNING
# =========================================================================

# Database Configuration
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_CACHE_SIZE=1GB
POSTGRES_MAINTENANCE_MEM=64MB
POSTGRES_MAX_CONNECTIONS=100

# Redis Configuration
REDIS_MAX_CONNECTIONS=50

# Worker Configuration
WORKER_CONCURRENCY=4
ANALYSIS_BATCH_SIZE=50
QUEUE_PREFETCH=10
TASK_TIMEOUT=300

# Cache Configuration
CACHE_TTL_HOURS=24
CONTEXT_CACHE_SIZE=1000

# =========================================================================
# LOGGING AND MONITORING
# =========================================================================

# Log Level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
DEBUG=false

# Monitoring Configuration
HEALTH_CHECK_INTERVAL=30
METRICS_INTERVAL=60
DASHBOARD_REFRESH_INTERVAL=5

# Prometheus Configuration
PROMETHEUS_RETENTION=7d
PROMETHEUS_RETENTION_SIZE=1GB
PROMETHEUS_LOG_LEVEL=info
PROMETHEUS_MAX_CONCURRENCY=20
PROMETHEUS_QUERY_TIMEOUT=2m

# Grafana Configuration  
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_LOG_LEVEL=info

# =========================================================================
# ADVANCED CONFIGURATION
# =========================================================================

# Database Pool Settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30

# Queue Configuration
QUEUE_NAME=project_index_analysis
QUEUE_PRIORITY=normal
ENABLE_DLQ=true
MAX_RETRY_ATTEMPTS=3

# Monitor Advanced Settings
MAX_EVENTS_PER_SECOND=100
MONITOR_BATCH_SIZE=20
MONITOR_QUEUE_SIZE=1000
ENABLE_RECURSIVE_MONITORING=true
ENABLE_SYMLINK_FOLLOWING=false
ENABLE_CONTENT_CHANGE_DETECTION=true
ENABLE_METADATA_TRACKING=true

# Performance Optimization
POLLING_INTERVAL=1
CLEANUP_INTERVAL=5
MAX_HISTORY_ENTRIES=1000

# =========================================================================
# DEVELOPMENT OVERRIDES (Only used in development)
# =========================================================================

# Set NODE_ENV for dashboard development
NODE_ENV=production

# Worker settings for development
WORKER_POOL=prefork
WORKER_ID=1

# Database hosts (normally handled by Docker network)
DATABASE_HOST=postgres
REDIS_HOST=redis